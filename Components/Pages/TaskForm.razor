@page "/addtask"
@inject TaskContext TaskContext
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthenticationStateProvider
@using BlazorTaskManager.Data
@using BlazorTaskManager.Models;
@using BlazorTaskManager.Models.Task;

<div class="container">
    <h3 class="text-center mb-4">✏️ Dodaj nowe zadanie</h3>

    <div class="input-group">
        <input @bind="newTask.Title" class="form-control" placeholder="Wpisz nazwę zadania..." />
        <button class="btn btn-success" @onclick="AddTask">✔️ Dodaj</button>
    </div>

    <button class="btn btn-secondary mt-3 w-100" @onclick="NavigateBack">⬅️ Powrót</button>
</div>

@code {
    private TaskItem newTask = new();

    private void AddTask()
    {
        if (!string.IsNullOrWhiteSpace(newTask.Title))
        {
            TaskContext.Tasks.Add(newTask);
            TaskContext.SaveChanges();
            Navigation.NavigateTo("/");
        }
    }

    private void NavigateBack()
    {
        Navigation.NavigateTo("/");
    }
}
